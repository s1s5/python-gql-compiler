# python type file generator for graphql-python/gql

# Features
- scalar/custom scalar
- enum
- union
- inline fragment
- fragment not supported yet

# Usage
## create query graphql file

``` graphql
# schema.graphql
type Query {
  hello: String!
}
```

``` graphql
# example.graphql
query Hello {
  hello
}
```
## run generate command
``` shell
python main.py -s schema.graphql -q example.graphql
```

## check generated file
``` python
# example.py
# @generated AUTOGENERATED file. Do not Change!

import typing
from gql import gql, Client

GetScalarInput__required = typing.TypedDict("GetScalarInput__required", {})
GetScalarInput__not_required = typing.TypedDict("GetScalarInput__not_required", {}, total=False)


class GetScalarInput(GetScalarInput__required, GetScalarInput__not_required):
    pass


class GetScalar:
    _query = gql('''
        query GetScalar {
          hello
        }
    ''')
    @classmethod
    def execute(cls, client: Client, variable_values: GetScalarInput = {}) -> GetScalarResponse:
        return client.execute(  # type: ignore
            cls._query, variable_values=variable_values
        )
    @classmethod
    def execute_async(cls, client: Client, variable_values: GetScalarInput = {}) -> GetScalarResponse:
        return client.execute_async(  # type: ignore
            cls._query, variable_values=variable_values
        )

```
## run query

``` python
from gql import Client
from gql.transport.aiohttp import AIOHTTPTransport

transport = AIOHTTPTransport(url="http://localhost:8000")
client = Client(transport=transport, fetch_schema_from_transport=True, parse_results=True)

result0 = client_queries.GetScalar.execute(client)
assert result0 == {"hello": "hello world"}
```



# Example
## generate type file
``` shell
# install required packages
poetry install

# run example server
python -m strawberry server example.server:schema

# @another shell
python main.py -s http://localhost:8000 -q ./example/client_queries.graphql
```
This command generates `example/client_queries.py`.

``` shell
python example/run_client.py 
```


## License

[MIT License](https://github.com/s1s5/python-gql-compiler/blob/master/LICENSE)
